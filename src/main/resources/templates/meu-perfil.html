<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Meu Perfil</title>
    <link rel="stylesheet" th:href="@{/css/header.css}">
    <link rel="stylesheet" th:href="@{/css/footer.css}">
    <link rel="stylesheet" th:href="@{/css/style.css}">
    <script th:src="@{/js/core.js}"></script>
    <script th:src="@{/js/api.js}"></script>
    <script th:src="@{/js/header.js}"></script>
    <script th:src="@{/js/meu-perfil.js}"></script>
</head>
<body>
    <div th:replace="fragments/header :: header"></div>
    <main class="page-shell">
        <section class="card-block perfil-card">
            <div class="card-header">
                <div>
                    <p class="eyebrow">Conta</p>
                    <h2>Meu Perfil</h2>
                </div>
            </div>
            <div style="display:flex;justify-content:space-between;align-items:center;margin-bottom:10px;">
                <button type="button" class="btn primary" style="width:auto;padding:10px 16px;" onclick="habilitarEdicao()">Editar perfil</button>
                <button type="button" class="btn secondary" style="width:auto;padding:10px 16px;" onclick="abrirModalSenha()">Alterar senha da conta</button>
            </div>
            <form id="perfil-form" class="form-grid">
                <div class="field">
                    <label for="perfil-nome">Nome</label>
                    <input id="perfil-nome" type="text" required readonly>
                </div>

                <div class="field">
                    <label for="perfil-email">Email</label>
                    <input id="perfil-email" type="email" required readonly>
                </div>

                <div class="form-actions">
                    <button type="submit" class="btn primary" id="perfil-salvar" disabled>Salvar</button>
                </div>
            </form>
            <div id="perfil-msg" class="inline-msg"></div>
        </section>
    </main>
    <div th:replace="fragments/footer :: footer"></div>

    <div id="modal-senha" class="overlay" style="display:none;">
        <div class="shell modal-senha-card">
            <div class="form-wrap modal-senha-wrap">
                <div class="brand">
                    <p class="title">Alterar senha</p>
                    <p class="subtitle">Informe sua senha atual e defina uma nova.</p>
                </div>
                <form id="senha-form" onsubmit="salvarSenha(event)">
                    <div class="field">
                        <label for="senha-atual">Senha atual</label>
                        <input class="input" id="senha-atual" type="password" required>
                    </div>
                    <div class="field">
                        <label for="senha-nova">Nova senha</label>
                        <input class="input" id="senha-nova" type="password" required>
                    </div>
                    <div class="field">
                        <label for="senha-conf">Confirmar nova senha</label>
                        <input class="input" id="senha-conf" type="password" required>
                    </div>
                    <div class="actions" style="justify-content:flex-end; gap:10px;">
                        <button type="button" class="btn secondary" onclick="fecharModalSenha()" style="width:auto;padding:12px 16px;border:2px solid #fff;">Cancelar</button>
                        <button type="submit" class="btn primary" style="width:auto;padding:12px 16px;">Salvar senha</button>
                    </div>
                </form>
            </div>
        </div>
    </div>
</body>
</html>
